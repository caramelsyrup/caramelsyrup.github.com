---
title: 8.상속과 다형성
---

1. **상속이란?**
	* 클래스의 상속
		* A클래스가 B클래스에게 상속한다 = B클래스가 A클래스를 상속받는다
		* A클래스(상위,부모) <----  B클래스(하위,자식)
		* 상속을 구현하려면 **extends** 예약어 사용.
		* 코드예시 : `class B extends A {~~}` 
		* `class 사람 extends 포유류 {~~~~}`
		* 하위클래스는 구체적, 상위클래스는 일반적
2. **상속에서 클래스 생성과 형변환**
	* 하위 클래스가 생성되는 과정
		* 상속받은 하위 클래스는 상위 클래스의 변수와 메서드 사용 가능
		* 상위클래스를 상속받고 있는 하위클래스는  생성될 떄, 반드시 
		   상위클래스의 생성자를 먼저 호출.
		* 상위 클래스의 변수들이 메모리에 먼저 생성된 후, 하위 클래스에서
		   이 변수들에 접근함.
		* 상위클래스에서 private을 쓰게 되면, 오류 발생.
	* 부모를 부르는 예약어, super
		* 하위클래스에서 상위클래스로 접근할 때, 사용.
		* super는 참조값(주소값)을 가짐.
		* super는 상위클래스의 생성자를 호출하는 데도 사용.
		* 하위클래스 생성자만 호출했는데, 상위클래스 생성자가 호출되는 이유는
		   `super()`를 자동으로 호출하기때문.
		* 만약 디폴트생성자가 아닌 매개변수를 가진 생성자가 상위클래스에 있다면,
		   `super(매개변수1,매개변수2,...);`	로 작성.
			 물론 이경우에는 하위클래스의 상속자 역시 매개변수를 가져야 한다.
		*	상위클래스에 선언한 멤버변수나 메서드를 하위클래스에서 참조할때도 `super()`사용
  *	상위클래스로 묵시적 클래스형 변환
		*	상속을 받는 하위클래스는 상위클래스의 형이기도 하다.
		*	`상위클래스형 변수 = new 하위클래스형();` 가능.
		*	반대의 경우는 성립할 수 없음.
		*	하지만 위의 경우처럼 형변환이 이루어지면, 상위클래스의 멤버변수와 메서드에 접근.
		*	클래스의 상속단계가 여러가지일 경우?
		*	포유류 <-- 영장류 <-- 인간 의 단계 상속을 가정.
		*	`영장류 변수 = new 인간();`  가능
		*	`포유류 변수 = new 인간();`  가능
3. **메서드 오버라이딩**
	* 상위 클래스 메서드 재정의하기
		* 상위클래스의 메서드를 하위클래스에 맞게 재구현이 가능하다.
		* 이를 **메서드 오버라이딩**이라고 한다.
		* **반환형**,**메서드이름**,**매개변수개수**,**매개변수자료형**이 반드시 같아야함.
		* `@Override` 애노테이션이 붙는다.
		* 컴파일러에게 특정한 정보를 제공해 주는 역할.
		* 상속에서 상위클래스와 하위클래스에 같은 이름의 메서드가 존재할 때, 호출되는 메서드는 
		   인스턴스에 따라 결정된다.
		* 선언하는 클래스형이 아닌 생성되는 인스턴스의 메서드를 호출. 이를 **가상메서드**라고 함.
	* 가상메서드
		* 변수와 메서드는 각기 다른 메모리에 저장된다.  변수는 힙메모리에, 메서드는 메서드영역에
		* 가상메서드테이블이라는 영역에서 메서드이름과 실제 메모리 주소가 짝을 이루고 있음
		* 메서드가 오버라이드 되면, 다른 주소를 가지게 된다.	 
4. **다형성**
	* 다형성이란?
		* 하나의 코드가 여러 자료형으로 구현되어 실행되는 것.
		* 다형성은 추상클래스,인터페이스에서 구현 된다.
	* 다형성의 장점
		* 동물이 추가되는 경우를 생각하자. 새 동물도 동물클래스를 상속받아 구현하면, 동물클래스로 쉽게 관리.
		* 프로그램의 확장성이 나타남.
		* 일일이 코드를 다르게 구현하는것 보다는 상위클래스에서는 공통부분의 메서드를 제공, 하위클래스는
		   추가 요소만을 덧붙이면 간편.
		*	코드 양도 줄어들고, 유지보수도 편하다. 
5. **다형성 활용하기**
	* `ArrayList<Customer> customerList = new ArrayList<Customer>();` 로 코드를 작성.
		* 배열에 요소들이 Customer클래스 형이다. 이 클래스의 하위 클래스의 인스턴스가 배열에 추가되면, 
		   묵시적 형변환이  이루어진다.
		*	상속을 통해 각기 다른 하위클래스들이 저만의 기능을 수행하는 메서드를 가지는데, 배열요소의 인스턴스를
	     이용하면 이를 호출이 가능.
		* 만약에 가상메서드방식으로 자동 호출이 되지 않는다면, 각각 코드를 다 작성해야하므로, 유지보스가 어려워진다.
	* 상속의 사용 시점
		* **IS-A관계**에서 사용하는 것이 가장 효율적.	 
		* 일반적인 개념과 구체적인 개념의 관계.
		* 상위클래스와 하위클래스가 이질적인 관계라면, 상속을 사용하지 않는 것이 현명.
		* **HAS-A관계**에서도 사용하지 않는 것이 좋다.
		* 한 클래스가 다른 클래스를 소유하는 관계에서도 상속보다는 변수로 다루는 것이 더 효율적.
		* 자바는 다중 상속을 지원하지 않는다.
6. **다운 캐스팅과 instanceof**
	* 하위 클래스로 형변환, 다운캐스팅
		* 상위클래스보다 하위클래스의 메서드,변수를 사용해야할 떄는 다운캐스팅 이용.
		* `Animal hAnimal = new Human();`
		* `if(hAnimal instanceof Human){ ` hAnimal인스턴스자료형이 Human형이라면?
		* ` Human human = (Human)hAnimal; } ` 다운캐스팅해라.
