---
title: 14.예외처리
---

1. 예외 클래스
	* 오류란 무엇인가?
		* 프로그램 오류가 발생하는 상황은 두가지
			* 1st, 코드 작성 중 실수로 발생하는 컴파일 오류
			* 2nd, 실행 중인 프로그램이 의도하지 않은 동작을 하거나 프로그램이 중지되는 실행 오류.
			* 실행 오류 중 프로그램을 잘못 구현하여 의도한 바와 다르게 실행되어 생기는 오류를 버그.
		* 실제 서비스 중인 프로그램에서 오류가 발생하면, 서비스 중단을 하게되고 해당 오류를 재현하기도 어렵다.
		* 로그 분석을 통해 원인을 찾도록 프로그램 개발시, 로그를 정확히 남김.
		* 예외처리를 하는 이유는 프로그램이 비정상 종료가 되지 않도록 방지하기 위해서.
		* 예외 발생시, 로그를 남겨서 예외상황이 재발시 버그를 수정하는데 도움.
	* 오류와 예외
		* 실행 오류는 크게 두가지로 분류
			* 1st,자바가상머신에서 발생하는 시스템 오류
			* 사용가능한 동적 메모리가 없는 경우나 스택 메모리의 오버플로가 발생한 경우 등
			* 2nd,예외
			* 프로그램에서 제어가 가능한 오류. 파일을 읽으려는데, 없는경우, 배열값출력하는데, 배열요소가 없는 경우 등.
		* 오류클래스는 모두 Throwable 클래스에서 상속 받음.
			* Error클래스의 하위클래스는 시스템에서 발생하는 오류를 다루며, 프로그램을 제어하지 않음.
			* Exception클래스와 그 하위 클래스에서 프로그램에서 오류를 제어하도록 함.
	* 예외 클래스의 종류
		* 프로그램에서 처리하는 예외 클래스의 최상위 클래스는 **Exception**클래스.
		* 하위클래스가 다수 존재하지만, 주로 IOException클래스와 RuntimeException클래스가 쓰임.
		* IOException클래스는 입출력에 대한 예외를 처리.
		* RuntimeException클래스는 프로그램 실행 중 발생할 수 있는 오류에 대한 예외를 처리.
		* RuntimeException클래스는 try-catch문을 사용하지 않아도, 컴파일 오류가 나지 않음.
		* RuntimeException클래스의 하위 중에서 ArithmeticException은 산술연산 중 발생할 수 있는 예외.
		* 해당 예외는 컴파일러에 의해서 발견되지 않으므로, 개발자가 예외를 찾아야함.
		* 예로는 0으로 나눗셈연산하여 오류 발생하는 예외가 있다.
2. 예외 처리하기
	* try-catch문
		* 기본문법
		* `try{예외가 발생할 수 있는 코드 부분}catch(처리할 예외타입 e){예외발생시 처리하는 부분}`
		* RuntimeException클래스의 하위 클래스의 예외가 발생해도 컴파일 오류가 나지 않음.
		* 하지만 이 예외로 인해서 프로그램이 멈춤. 개발자가 직접 잡아줘야함.
		* try-catch문을 쓰면, 프로그램이 비정상적으로 종료되는 것을 막음.
	* 컴파일러에 의해 예외가 체크되는 경우
		* 자바에서 제공하는 예외 클래스들은 컴파일러에 의해 처리된다.
		* 이 경우 예외 처리를 하지 않으면, 컴파일 오류가 계속 나타남.
		* 코드 작성시 try-catch문이나 throws를 써야함.
		* catch 블록에 printStackTrace()메서드를 호출하여, 어디에서 예외가 발생했는지를 체크.
	* try-catch-finally문
		* 프로그램에서 사용한 리소스는 프로그램이 종료되면 자동으로 해제.
		* 만약 끝없이 계속 수행되는 서비스의 경우 리소스를 여러번 반복해서 열기만 하고 닫지 않는다면, 문제가 발생.
		* 시스템에서 허용하는 자원은 한계가 있음.
		* 이 때뭍에 try문과 catch문에 각각 시스템 리소스를 사용후 닫는 메서드를 일일이 적는 것은 번거로움.
		* try문에서 예외상황이 한두개가 아니라면, 복잡도가 심화.
		* finally블록을 잡아서 어떤 경우에도 반드시 수행되도록 유도.
		* try블록과 catch블록에 작성하지말고 finally블록에 한번 작성해주면 됨.
	* try-with-resources문
		* close()메소드를 명시적으로 작성하지 않아도, try블록 내에서 열린 리소스를 자동으로 닫도록 유도.
		* try-with-resources문을 사용하려면, 해당 리소스가 AutoCloseable인터페이스를 구현해야함.
		* close()메서드는 AutoCloseable인터페이스에 존재. close()메서드를 호출하지 않아도 됨.
		* 네트워크(socket)와 데이터베이스(connection)관련 클래스도 AutoCloseable인터페이스를 구현.
		* `try(A a = new A(); B b = new B()){...}catch(Exception e){....}`
		* try문의 괄호안에 리소스를 선언.
3. 예외 처리 미루기
	* 예외 처리를 미루는 throws 사용하기
		* 예외를 해당 메서드에서 처리를 하지 않고 미룬 후 메서드를 호출하여 사용하는 부분에서 예외를 처리.
		* 메서드를 호출하는 부분에서 예외처리를 하는데, 세가지 옵션을 확인 가능.
		* Add throws declaration은 main()함수 선언 부분에 throws를 하여, 예외처리를 미룬다. main()함수를 호출하는 자바가상머신이 예외를 받게 되고, 이것은 예외가 처리되는 것이 아닌, 프로그램이 비정상 종료가 됨.
		* Surround with try/multi-catch 는 하나의 catch블록에서 여러 예외를 한 문장으로 처리.
		* Surround with try/catch 는 각 상황마다의 예외를 처리하는 블록. 예외 상황의 수만큼 catch문이 생성.
	* 다중 예외 처리
		* catch블록에서 선언한 예외 이외의 예외에 대해서 처리를 할 때는 catch블록을 마지막에 하나 더 잡아서 Exception e를 사용한다.
		* `catch(Exception e){ e.printStackTrace(); }` 로 작성.
4. 사용자 정의 예외
	* 개발자가 예외를 정의 할 수 있음. 아이디값의 길이를 정하거나 값이 null이면 안되거나 하는 등의 제약조건 존재.
	* 사용자 정의 예외 클래스 구현하기
		* `public class IDFormatException extends Exception{`
		* ` public IDFormatException(String message){`
		* `  super(message); } }`
		* 생성자의 매개변수로 예외 상황 메시지를 받음.
		* Exception 클래스에서 메시지 생성자, 멤버변수, 메서드를 이미 제공.
		* message는 getMessage메서드를 호출하여, 내용을 볼 수 있음.
